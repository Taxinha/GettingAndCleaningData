GettingAndCleaningData
======================

Getting And Cleaning Data - Course Project

### How to use the run_analysis.R script
To run the **run_analysis.R** script you will need to source the file in R or RStudio and then call the `main`function

```
> source('run_analysis.R')
> main()
[1] "Starting run_analysis..."
```

Once you sourced the script, the main function will be executed and will call the following functions: 

1. `downloadAndExtractZipFile()`: this function will create a folder _data_ locally if doesn't exist and download the data zip file in https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip. After downloading the function will extract all files.
Alternatively if you already have the zip file and don't want to download it again, please make sure you have the following folder structure - it'll prevent the function downloading and unziping the file:
```
data
  |-UCI HAR Dataset
      |-activity_labels.txt
      |-features.txt
      |-features_info.tx
      |-README.txt
      |-test
      |   |-Inertial Signals (content ignored in this script)
      |   |-subject_test.txt
      |   |-X_test.txt
      |   |-y_test.txt
      |-train
          |-Inertial Signals (content ignored in this script)
          |-subject_train.txt
          |-X_train.txt
          |-y_train.txt
```
2. `readAndMergeTrainingAndTestSets()`: this function will read the following files:
  * __X_train.txt__ - contain the training set - into `trainX`
  * __y_train.txt__ - contain the training labels - into `trainY`
  * __subject_train.txt__ - contain the training subjects per row - into `trainSubject`
  * __X_test.txt__ - contain the test set - into `testX`
  * __y_test.txt__ - contain the test labels - into `testY`
  * __subject_test.txt__ - contain the test subjects per row - into `testSubject`
  
  After reading the files, the function will assign "subject" as the column name for the datasets `trainSubject` and `testSubject`, and assign "label" as the column name for the datasets `trainY`and `testY`.
  
  Will then column bind the 3 training datasets into `trainDS` and the 3 test datasets into `testDS`:
  
```
trainDS <- cbind(trainX, trainY, trainSubject)  
testDS <- cbind(testX, testY, testSubject)
```
  Then will use the `trainDS` and `testDS` and performe a row bind to merge the training and test data:
  
```
mergedDS <- rbind(trainDS, testDS)
```

   The `mergedDS` will be returned.
   
3. `extractMeanAndSTD(dataSet)`: this function receives as input the dataset created on the previous function. 

```
variables <- meanAndStd$V2 %>%
    gsub(pattern = "-|\\(|\\)", replacement = "") %>%
    gsub(pattern = "^t", replacement = "time") %>%
    gsub(pattern = "^f", replacement = "frequency") %>%
    gsub(pattern = "BodyBody", replacement = "Body") %>%
    gsub(pattern = "Acc", replacement = "accelerometer") %>%
    gsub(pattern = "Gyro", replacement = "gyroscope") %>%
    gsub(pattern = "Mag", replacement = "magnitude") %>%
    tolower()
```


4. `updateActivityNames`
5. `tidyDataSet`
6. `writeTidyDataFile(tidyData, fileName)`: this function receives two input parameters: 
 * `tidyData`: the dataset with the narrow tidy dataset to be written into the file
 * `filename`: filename that will be created with the tidy data
 
 The function will check if the file exists locally and delete it if exists. Then will write the tidy dataset using `write.table` with the flag `row.name = FALSE` using the `filename` and the namse of the output file. 



### Auxiliar Functions

* `readDataFile(fileName, ...)`: this function checks if the file exists and if it exists will read the file using `read.table` function and will pass any extra parameters `...` directly.
If the file doesn't exist the function will `stop` with a "file doesn't exist" message.





> When you given the variables descriptive names, explain why the names are descriptive.

### How to read the tidy data file generated by this script
Assuming the file is in the same folder as the run_analysis.R script and has the original name *tidyData.txt* you can call the function `readTidyDataFile()` to load the file

```
> tidyData <- readTidyDataFile()
[1] "Reading file  tidyData.txt"
> dim(tidyData)
[1] 11880     4
> head(tidyData, n = 2)
  subject activity                    feature mean.value.
1       1   LAYING timebodyaccelerometermeanx  0.22159824
2       1   LAYING timebodyaccelerometermeany -0.04051395
```

